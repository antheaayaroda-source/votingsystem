{% extends 'voting/admin/base.html' %}

{% block title %}Teams and Candidates | Admin Dashboard{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0">Teams and Candidates</h1>
        <a href="{% url 'voting:admin_parties' %}" class="btn btn-outline-primary">
            <i class="bi bi-arrow-left"></i> Back to Parties
        </a>
    </div>

    <div class="row">
        {% for party in parties %}
        <div class="col-md-6 mb-4">
            <div class="card h-100">
                <div class="card-header bg-primary text-white">
                    <h5 class="card-title mb-0">{{ party.name }}</h5>
                    {% if party.team_name %}
                        <small class="text-white-50">{{ party.team_name }}</small>
                    {% endif %}
                </div>
                <div class="card-body">
                    <div class="team-members">
                        <div class="member mb-3">
                            <h6 class="fw-bold mb-1">President</h6>
                            {% if party.president %}
                                <div class="d-flex align-items-center">
                                    {% if party.president.photo %}
                                        <img src="{{ party.president.photo.url }}" 
                                             alt="{{ party.president.name }}" 
                                             class="rounded-circle me-3" 
                                             style="width: 50px; height: 50px; object-fit: cover;">
                                    {% else %}
                                        <div class="rounded-circle bg-light text-secondary d-flex align-items-center justify-content-center me-3" 
                                             style="width: 50px; height: 50px;">
                                            <i class="bi bi-person fs-4"></i>
                                        </div>
                                    {% endif %}
                                    <div>
                                        <div class="fw-bold">{{ party.president.name }}</div>
                                        <small class="text-muted">{{ party.president.position.name }}</small>
                                    </div>
                                </div>
                            {% else %}
                                <div class="text-muted">No candidate assigned</div>
                            {% endif %}
                        </div>

                        <div class="member mb-3">
                            <h6 class="fw-bold mb-1">Vice President</h6>
                            {% if party.vice_president %}
                                <div class="d-flex align-items-center">
                                    {% if party.vice_president.photo %}
                                        <img src="{{ party.vice_president.photo.url }}" 
                                             alt="{{ party.vice_president.name }}" 
                                             class="rounded-circle me-3" 
                                             style="width: 50px; height: 50px; object-fit: cover;">
                                    {% else %}
                                        <div class="rounded-circle bg-light text-secondary d-flex align-items-center justify-content-center me-3" 
                                             style="width: 50px; height: 50px;">
                                            <i class="bi bi-person fs-4"></i>
                                        </div>
                                    {% endif %}
                                    <div>
                                        <div class="fw-bold">{{ party.vice_president.name }}</div>
                                        <small class="text-muted">{{ party.vice_president.position.name }}</small>
                                    </div>
                                </div>
                            {% else %}
                                <div class="text-muted">No candidate assigned</div>
                            {% endif %}
                        </div>

                        <div class="member">
                            <h6 class="fw-bold mb-1">Secretary</h6>
                            {% if party.secretary %}
                                <div class="d-flex align-items-center">
                                    {% if party.secretary.photo %}
                                        <img src="{{ party.secretary.photo.url }}" 
                                             alt="{{ party.secretary.name }}" 
                                             class="rounded-circle me-3" 
                                             style="width: 50px; height: 50px; object-fit: cover;">
                                    {% else %}
                                        <div class="rounded-circle bg-light text-secondary d-flex align-items-center justify-content-center me-3" 
                                             style="width: 50px; height: 50px;">
                                            <i class="bi bi-person fs-4"></i>
                                        </div>
                                    {% endif %}
                                    <div>
                                        <div class="fw-bold">{{ party.secretary.name }}</div>
                                        <small class="text-muted">{{ party.secretary.position.name }}</small>
                                    </div>
                                </div>
                            {% else %}
                                <div class="text-muted">No candidate assigned</div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div class="card-footer bg-transparent">
                    <a href="{% url 'voting:admin_edit_party' party.id %}" class="btn btn-sm btn-outline-primary">
                        <i class="bi bi-pencil"></i> Edit Team
                    </a>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12">
            <div class="alert alert-info">
                <i class="bi bi-info-circle"></i> No parties found. 
                <a href="{% url 'voting:admin_add_party' %}">Add your first party</a>.
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
    .card {
        transition: transform 0.2s, box-shadow 0.2s;
    }
    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    }
    .member {
        padding: 0.75rem;
        border-radius: 0.375rem;
        background-color: #f8f9fa;
    }
    .member:not(:last-child) {
        margin-bottom: 1rem;
    }
</style>
{% endblock %}
